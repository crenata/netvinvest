{"version":3,"file":"static/js/875.91b4cd16.chunk.js","mappings":"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","sources":["helpers/IsEmpty.js","helpers/IsNotEmpty.js","nostr/Worker.js","../webpack/bootstrap","../webpack/runtime/chunk loaded","../webpack/runtime/define property getters","../webpack/runtime/ensure chunk","../webpack/runtime/get javascript chunk filename","../webpack/runtime/get mini-css chunk filename","../webpack/runtime/hasOwnProperty shorthand","../webpack/runtime/publicPath","../webpack/runtime/importScripts chunk loading","../webpack/runtime/startup chunk dependencies","../webpack/startup"],"sourcesContent":["const IsEmpty = (data) => {\n    if (typeof data === \"object\") {\n        if (!data) {\n            return true;\n        }\n        return false;\n    } else if (Array.isArray(data)) {\n        if (data.length === 0) {\n            return true;\n        }\n        return false;\n    } else if (typeof data === \"string\") {\n        if (!data.trim()) {\n            return true;\n        } else if (data === \"undefined\") {\n            return true;\n        } else if (data === \"null\") {\n            return true;\n        }\n        return false;\n    } else if (typeof data === \"number\") {\n        if (data === 0) {\n            return true;\n        }\n        return false;\n    } else if (typeof data === \"undefined\") {\n        return true;\n    } else if (typeof data === \"boolean\") {\n        if (data === false) {\n            return true;\n        }\n        return false;\n    }\n    return false;\n};\n\nexport default IsEmpty;","import IsEmpty from \"./IsEmpty\";\n\nconst IsNotEmpty = (data) => {\n    return !IsEmpty(data);\n};\n\nexport default IsNotEmpty;","import * as Comlink from \"comlink\";\nimport {SimplePool} from \"nostr-tools\";\nimport IsEmpty from \"../helpers/IsEmpty\";\nimport IsNotEmpty from \"../helpers/IsNotEmpty\";\n\nexport class BackgroundNostr {\n    constructor() {\n        this.seenOn = {};\n        this.subs = {};\n        this.relays = {};\n        this.pool = new SimplePool();\n        this.poolCreated = Date.now();\n    }\n\n    setRelays(relays) {\n        this.relays = relays;\n    }\n\n    getPool() {\n        if (Date.now() - this.poolCreated > 120000) {\n            /* Renew pool every 2 minutes */\n            this.pool.close(this.relays);\n\n            this.pool = new SimplePool();\n            this.poolCreated = Date.now();\n        }\n\n        return this.pool;\n    }\n\n    fetch(filters, quitMs = 0) {\n        return new Promise((resolve, reject) => {\n            const pool = this.getPool();\n            const sub = pool.sub(this.relays, filters);\n            const events = [];\n\n            const quit = () => {\n                sub.unsub();\n                resolve(events);\n            };\n\n            let timer = quitMs > 0 ? setTimeout(() => {\n                quit();\n            }, quitMs) : null;\n\n            sub.on(\"event\", event => {\n                events.push(event);\n                this.seenOn[event.id] = pool.seenOn(event.id);\n\n                if (quitMs > 0) {\n                    clearTimeout(timer);\n                    timer = setTimeout(() => {\n                        quit();\n                    }, quitMs);\n                }\n            });\n\n            if (IsEmpty(quitMs)) {\n                sub.on(\"eose\", () => {\n                    quit();\n                });\n            }\n        });\n    }\n\n    sub(filters, onEvent, unsub = true, onEose = null) {\n        const subId = Math.random().toString().slice(2);\n        const pool = this.getPool();\n        const sub = pool.sub(this.relays, filters, {\n            id: subId\n        });\n\n        sub.on(\"event\", event => {\n            this.seenOn[event.id] = pool.seenOn(event.id);\n            onEvent(event);\n        });\n\n        sub.on(\"eose\", () => {\n            if (unsub) this.unsub(subId);\n            onEose();\n        });\n\n        this.subs[subId] = sub;\n\n        return subId;\n    }\n\n    unsub(subId) {\n        if (IsNotEmpty(this.subs[subId])) {\n            this.subs[subId].unsub();\n            delete this.subs[subId];\n        }\n    }\n\n    async findHealthyRelay(relays) {\n        const pool = this.getPool();\n        for (const relay of relays) {\n            try {\n                await pool.ensureRelay(relay);\n\n                return relay;\n            } catch (e) {\n                // Do nothing\n            }\n        }\n\n        throw new Error(\"Couldn't find a working relay.\");\n    }\n\n    async where(eventId) {\n        let try_ = 0;\n        while (IsEmpty(this.seenOn[eventId])) {\n            await this.fetch([{\n                ids: [eventId]\n            }]);\n\n            try_++;\n\n            if (try_ === 3) break;\n        }\n\n        if (IsEmpty(this.seenOn[eventId])) throw new Error(\"Couldn't find root event.\");\n\n        return this.findHealthyRelay(this.seenOn[eventId]);\n    }\n}\n\nComlink.expose(new BackgroundNostr());","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n// the startup function\n__webpack_require__.x = () => {\n\t// Load entry module and return exports\n\t// This entry module depends on other loaded chunks and execution need to be delayed\n\tvar __webpack_exports__ = __webpack_require__.O(undefined, [704], () => (__webpack_require__(9875)))\n\t__webpack_exports__ = __webpack_require__.O(__webpack_exports__);\n\treturn __webpack_exports__;\n};\n\n","var deferred = [];\n__webpack_require__.O = (result, chunkIds, fn, priority) => {\n\tif(chunkIds) {\n\t\tpriority = priority || 0;\n\t\tfor(var i = deferred.length; i > 0 && deferred[i - 1][2] > priority; i--) deferred[i] = deferred[i - 1];\n\t\tdeferred[i] = [chunkIds, fn, priority];\n\t\treturn;\n\t}\n\tvar notFulfilled = Infinity;\n\tfor (var i = 0; i < deferred.length; i++) {\n\t\tvar chunkIds = deferred[i][0];\n\t\tvar fn = deferred[i][1];\n\t\tvar priority = deferred[i][2];\n\t\tvar fulfilled = true;\n\t\tfor (var j = 0; j < chunkIds.length; j++) {\n\t\t\tif ((priority & 1 === 0 || notFulfilled >= priority) && Object.keys(__webpack_require__.O).every((key) => (__webpack_require__.O[key](chunkIds[j])))) {\n\t\t\t\tchunkIds.splice(j--, 1);\n\t\t\t} else {\n\t\t\t\tfulfilled = false;\n\t\t\t\tif(priority < notFulfilled) notFulfilled = priority;\n\t\t\t}\n\t\t}\n\t\tif(fulfilled) {\n\t\t\tdeferred.splice(i--, 1)\n\t\t\tvar r = fn();\n\t\t\tif (r !== undefined) result = r;\n\t\t}\n\t}\n\treturn result;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.f = {};\n// This file contains only the entry chunk.\n// The chunk loading function for additional chunks\n__webpack_require__.e = (chunkId) => {\n\treturn Promise.all(Object.keys(__webpack_require__.f).reduce((promises, key) => {\n\t\t__webpack_require__.f[key](chunkId, promises);\n\t\treturn promises;\n\t}, []));\n};","// This function allow to reference async chunks and sibling chunks for the entrypoint\n__webpack_require__.u = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"static/js/\" + chunkId + \".\" + \"db722c0b\" + \".chunk.js\";\n};","// This function allow to reference async chunks and sibling chunks for the entrypoint\n__webpack_require__.miniCssF = (chunkId) => {\n\t// return url for filenames based on template\n\treturn undefined;\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","__webpack_require__.p = \"/\";","// no baseURI\n\n// object to store loaded chunks\n// \"1\" means \"already loaded\"\nvar installedChunks = {\n\t875: 1\n};\n\n// importScripts chunk loading\nvar installChunk = (data) => {\n\tvar chunkIds = data[0];\n\tvar moreModules = data[1];\n\tvar runtime = data[2];\n\tfor(var moduleId in moreModules) {\n\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\t__webpack_require__.m[moduleId] = moreModules[moduleId];\n\t\t}\n\t}\n\tif(runtime) runtime(__webpack_require__);\n\twhile(chunkIds.length)\n\t\tinstalledChunks[chunkIds.pop()] = 1;\n\tparentChunkLoadingFunction(data);\n};\n__webpack_require__.f.i = (chunkId, promises) => {\n\t// \"1\" is the signal for \"already loaded\"\n\tif(!installedChunks[chunkId]) {\n\t\tif(true) { // all chunks have JS\n\t\t\timportScripts(__webpack_require__.p + __webpack_require__.u(chunkId));\n\t\t}\n\t}\n};\n\nvar chunkLoadingGlobal = self[\"webpackChunkamine\"] = self[\"webpackChunkamine\"] || [];\nvar parentChunkLoadingFunction = chunkLoadingGlobal.push.bind(chunkLoadingGlobal);\nchunkLoadingGlobal.push = installChunk;\n\n// no HMR\n\n// no HMR manifest","var next = __webpack_require__.x;\n__webpack_require__.x = () => {\n\treturn __webpack_require__.e(704).then(next);\n};","// run startup\nvar __webpack_exports__ = __webpack_require__.x();\n"],"names":["data","Array","isArray","length","trim","IsEmpty","Comlink","constructor","this","seenOn","subs","relays","pool","SimplePool","poolCreated","Date","now","setRelays","getPool","close","fetch","filters","quitMs","arguments","undefined","Promise","resolve","reject","sub","events","quit","unsub","timer","setTimeout","on","event","push","id","clearTimeout","onEvent","onEose","subId","Math","random","toString","slice","IsNotEmpty","findHealthyRelay","relay","ensureRelay","e","Error","where","eventId","try_","ids","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","exports","module","__webpack_modules__","m","x","__webpack_exports__","O","deferred","result","chunkIds","fn","priority","notFulfilled","Infinity","i","fulfilled","j","Object","keys","every","key","splice","r","d","definition","o","defineProperty","enumerable","get","f","chunkId","all","reduce","promises","u","miniCssF","obj","prop","prototype","hasOwnProperty","call","p","installedChunks","importScripts","chunkLoadingGlobal","self","parentChunkLoadingFunction","bind","moreModules","runtime","pop","next","then"],"sourceRoot":""}